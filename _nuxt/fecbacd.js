(window.webpackJsonp=window.webpackJsonp||[]).push([[24,17],{281:function(e,t,n){var r=n(3),o=n(282),d=n(109);r({target:"Array",proto:!0},{fill:o}),d("fill")},282:function(e,t,n){"use strict";var r=n(18),o=n(75),d=n(13);e.exports=function(e){for(var t=r(this),n=d(t.length),l=arguments.length,c=o(l>1?arguments[1]:void 0,n),h=l>2?arguments[2]:void 0,m=void 0===h?n:o(h,n);m>c;)t[c++]=e;return t}},332:function(e,t,n){"use strict";n.r(t),n.d(t,"AR",(function(){return o}));n(29),n(281);var r=n(280),o=function(){function e(){this.init(),this.animate()}var t=e.prototype;return t.init=function(){var e=this;this.adjustMode=0,this.markerEnable=!1,this.clock=new r.l,this.scene=new r.ib;var t=new r.a(16777215,1);this.scene.add(t),this.camera=new r.Z,this.scene.add(this.camera),this.totalTime=0,this.renderer=new r.ub({canvas:document.querySelector("#three-canvas"),antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(new r.m("lightgrey"),0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=r.t,document.body.appendChild(this.renderer.domElement),this.arToolkitContext=new THREEx.ArToolkitContext({cameraParametersUrl:"/media-exp-ts/camera_para.dat"}),this.arToolkitContext.init((function(){e.camera.projectionMatrix.copy(e.arToolkitContext.getProjectionMatrix())}));var n=this;function o(){n.arToolkitSource.onResizeElement(),n.arToolkitSource.copyElementSizeTo(n.renderer.domElement),document.getElementById("col-canvas").width=window.innerWidth,document.getElementById("col-canvas").height=window.innerHeight,null!==n.arToolkitContext.arController&&n.arToolkitSource.copySizeTo(n.arToolkitContext.arController.canvas)}this.arToolkitSource=new THREEx.ArToolkitSource({sourceType:"webcam"}),this.arToolkitSource.init((function(){var e=0,t=setInterval((function(){++e>20&&clearInterval(t),o()}),100)})),window.addEventListener("resize",(function(){o()}));var d=new r.u;this.scene.add(d);var l=new THREEx.ArMarkerControls(this.arToolkitContext,d,{type:"pattern",patternUrl:"/media-exp-ts/3Dmarker/hiro.patt",changeMatrixMode:"modelViewMatrix"});l.addEventListener("getMarker",(function(e){console.log(e)})),l.addEventListener("markerFound",(function(){e.markerEnable=!0,console.log(l.markerVisible)})),l.addEventListener("markerLost",(function(){e.markerEnable=!1}));var c=new r.f(1,1,1),h=new r.P({transparent:!1,opacity:1}),m=new r.N(c,h);m.position.y=.5,d.add(m),function e(){requestAnimationFrame(e);var t=window.innerWidth/8,o=window.innerHeight/8,d=parseInt(document.getElementById("three-canvas").style.width,10),l=parseInt(document.getElementById("three-canvas").style.height,10),c=document.getElementById("col-canvas").getContext("2d");c.clearRect(0,0,window.innerWidth,window.innerHeight);var h,m,w=new r.gb,v=window.innerHeight/window.innerWidth;if(v>=1){var f=window.innerHeight/300;h=35*f+150*(1-window.innerWidth/window.innerHeight)*f,m=45*f}else if(v>=.75){var y=window.innerWidth/600,x=4*(1-v);h=(-20*x+70*(1-x))*y,m=(65*x+90*(1-x))*y}else{var M=window.innerWidth/300;h=M/2*-20,m=M/1.5*65+(1-v-.25)*(window.innerHeight/2)}if(1!=n.markerEnable);else if(1==n.adjustMode)for(var E=0;E<o;E++)for(var i=0;i<t;i++){var k=8*i,T=8*E,I=1.08*(8*i+h)/d*2-1,C=-.8*(8*E+m)/l*2+1;I=Math.min(Math.max(I,-1),1),C=Math.min(Math.max(C,-1),1);var j=new r.rb(I,C);w.setFromCamera(j,n.camera),w.intersectObjects(n.scene.children,!0).length>0&&(c.beginPath(),c.fillRect(k,T,8,8),c.fillStyle="rgba(0,255,0,0.5)",c.closePath(),c.fill())}else if(2==n.adjustMode)for(var H=0;H<o;H++)for(var B=0;B<t;B++){var R=8*B,S=8*H,rect=document.getElementById("three-canvas").getBoundingClientRect(),W=(8*B-rect.left)*d/rect.width,P=(8*H-rect.top)*l/rect.height,A=1.08*(W/d*2-1),L=.8*(-P/l*2+1);A=Math.min(Math.max(A,-1),1),L=Math.min(Math.max(L,-1),1);var _=new r.rb(A,L);w.setFromCamera(_,n.camera),w.intersectObjects(n.scene.children,!0).length>0&&(c.beginPath(),c.fillRect(R,S,8,8),c.fillStyle="rgba(0,0,255,0.5)",c.closePath(),c.fill())}else for(var z=0;z<o;z++)for(var F=0;F<t;F++){var O=8*F,X=8*z,Y=8*F/d*2-1,D=-8*z/l*2+1;Y=Math.min(Math.max(Y,-1),1),D=Math.min(Math.max(D,-1),1);var J=new r.rb(Y,D);w.setFromCamera(J,n.camera),w.intersectObjects(n.scene.children,!0).length>0&&(c.beginPath(),c.fillRect(O,X,8,8),c.fillStyle="rgba(255,0,0,0.5)",c.closePath(),c.fill())}}(),document.addEventListener("mousemove",(function(e){var t,o,d,l,c=parseInt(document.getElementById("three-canvas").style.width,10),h=parseInt(document.getElementById("three-canvas").style.height,10),m=window.innerHeight/window.innerWidth;if(m>=1){var w=window.innerHeight/300;d=35*w+150*(1-window.innerWidth/window.innerHeight)*w,l=45*w}else if(m>=.75){var v=window.innerWidth/600,f=4*(1-m);d=(-20*f+70*(1-f))*v,l=(65*f+90*(1-f))*v}else{var y=window.innerWidth/300;d=y/2*-20,l=y/1.5*65+(1-m-.25)*(window.innerHeight/2)}if(1==n.adjustMode)t=1.08*(e.clientX+d)/c*2-1,o=-.8*(e.clientY+l)/h*2+1;else if(2==n.adjustMode){var x=n.getCanvasRelativePosition(e);t=1.08*(x.x/c*2-1),o=.8*(-x.y/h*2+1)}else t=e.clientX/c*2-1,o=-e.clientY/h*2+1;t=Math.min(Math.max(t,-1),1),o=Math.min(Math.max(o,-1),1);var M=new r.rb(t,o),E=new r.gb;E.setFromCamera(M,n.camera),E.intersectObjects(n.scene.children,!0).length>0?document.getElementById("collision-message").innerHTML="collision: box (x:"+t+", y:"+o+") (w:"+window.innerWidth+" h:"+window.innerHeight+")":document.getElementById("collision-message").innerHTML="collision: none (x:"+t+", y:"+o+") (w:"+window.innerWidth+" h:"+window.innerHeight+")"}),!1)},t.getCanvasRelativePosition=function(e){var rect=document.getElementById("three-canvas").getBoundingClientRect(),t=parseInt(document.getElementById("three-canvas").style.width,10),n=parseInt(document.getElementById("three-canvas").style.height,10);return{x:(e.clientX-rect.left)*t/rect.width,y:(e.clientY-rect.top)*n/rect.height}},t.update=function(){this.arToolkitSource.ready&&this.arToolkitContext.update(this.arToolkitSource.domElement)},t.render=function(){this.renderer.render(this.scene,this.camera)},t.animate=function(){requestAnimationFrame(this.animate.bind(this));var e=this.clock.getDelta();this.totalTime+=e,this.update(),this.render(),null!=this.mixer&&this.mixer.update(e)},t.changeAdjustMode=function(){this.adjustMode=this.adjustMode<2?this.adjustMode+1:0,1==this.adjustMode?document.getElementById("collision-message").style.background="#4A4":2==this.adjustMode?document.getElementById("collision-message").style.background="#00afe4":document.getElementById("collision-message").style.background="#444"},e}()},333:function(e,t,n){var content=n(387);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(31).default)("7f6aba98",content,!0,{sourceMap:!1})},386:function(e,t,n){"use strict";n(333)},387:function(e,t,n){var r=n(30)(!1);r.push([e.i,"html{width:100%;height:100%}body{overflow:hidden;margin:0}#collision-message{position:absolute;top:0;left:0;width:100%;z-index:1023;background:#444;color:#fff}#col-canvas,#three-canvas{width:100%;height:100%}#col-canvas{position:absolute;top:0;left:0;z-index:1022}",""]),e.exports=r},414:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(332),d=r.a.extend({layout:"ar",data:function(){return{ar:void 0}},head:function(){return{script:[]}},mounted:function(){this.ar=new o.AR},methods:{clickMessage:function(){this.ar.changeAdjustMode()}}}),l=(n(386),n(12)),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"collision-message"},on:{click:e.clickMessage}},[e._v("...")]),e._v(" "),n("canvas",{attrs:{id:"three-canvas"}}),e._v(" "),n("canvas",{attrs:{id:"col-canvas"}})])}),[],!1,null,null,null);t.default=component.exports}}]);