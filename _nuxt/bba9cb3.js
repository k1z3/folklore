(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{420:function(t,v,_){"use strict";_.r(v);var e=_(1).a.extend({}),l=_(12),component=Object(l.a)(e,(function(){var t=this,v=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("div",{staticClass:"container"},[_("h1",[t._v("Three.jsとAR.jsをNuxtで動かす")]),t._v(" "),_("div",{staticClass:"update-date mb"},[t._v("# 更新日: 2021年6月13日(日)")]),t._v(" "),_("div",{staticClass:"attention-box"},[_("div",{staticClass:"attention-box-title"},[t._v("A-Frame での制作中止について")]),t._v("\n    諸事情により、AR制作は ”A-Frame” から ”Three.js” に切り替えることになりました。"),_("br"),t._v("\n    そのため A-Frame に関する記事は一部を残し、デモページは削除します。\n  ")]),t._v(" "),_("p",{staticClass:"mb"},[t._v("NuxtでThree.jsとAR.jsが使えるように準備します。A-Frameよりは煩雑になります。")]),t._v(" "),_("h2",[t._v("下準備")]),t._v(" "),_("h3",[t._v("nuxt.config.jsに設定を追記する")]),t._v(" "),_("p",{staticClass:"mb"},[t._v("nuxt.config.js に Three.js と AR.js を使うための設定を追加します。")]),t._v(" "),_("p",[t._v("”head”内の”script”に”Three.js”と”AR.js”があるURLを追加します。なお、Three.jsとA-Frameでは用意されているAR.jsが違うので、\n    読み込むときは\n  ")]),t._v(" "),_("code",[_("ol",{staticClass:"mb"},[_("li",[t._v("export default {")]),t._v(" "),_("li",[t._v("  head: {")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("    〜〜〜")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("    script: [")]),t._v(" "),_("li",[t._v("      // Three.js 読み込み")]),t._v(" "),_("li",{staticStyle:{"background-color":"#883"}},[t._v('      {src: "https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.js"},')]),t._v(" "),_("li",[t._v("      // AR.js 読み込み")]),t._v(" "),_("li",{staticStyle:{"background-color":"#883"}},[t._v('      {src: "https://raw.githack.com/AR-js-org/AR.js/3.3.1/three.js/build/ar.js"},')]),t._v(" "),_("li",[t._v("    ],")]),t._v(" "),_("li",[t._v("  },")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("  〜〜〜")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("}")])])]),t._v(" "),_("p",{staticClass:"mb"},[t._v("pages単位で読み込もうとすると、うまくモジュールが認識されず使うことができません。")]),t._v(" "),_("h3",[t._v("camera_para.datとhiro.pattを配置する")]),t._v(" "),_("p",[t._v("AR.js と Three.js を利用する場合は、少なくともカメラの構成ファイルが必須となります。以下から構成ファイルをダウンロードすることができます。")]),t._v(" "),_("div",{staticClass:"mb"},[_("a",{staticClass:"link-box",attrs:{href:"/media-exp-ts/camera_para.dat",download:"camera_para.dat"}},[t._v("camera_para.datファイル")])]),t._v(" "),_("p",[t._v("さらにマーカーベースのARの場合、マーカーファイルも配置する必要があります。今回は”hiroマーカー”を導入しておこうと思います。")]),t._v(" "),_("div",{staticClass:"mb"},[_("a",{staticClass:"link-box",attrs:{href:"/media-exp-ts/3Dmarker/hiro.patt",download:"hiro.patt"}},[t._v("hiro.pattファイル")])]),t._v(" "),_("p",[t._v("Nuxtの場合、これらのファイルは”static”フォルダの下に配置しておきましょう(”assets”でも良いかもしれません)。私の場合は以下のように配置しました。")]),t._v(" "),_("code",[_("ol",{staticClass:"mb"},[_("li",[t._v("project")]),t._v(" "),_("li",[t._v("└─static")]),t._v(" "),_("li",{staticStyle:{"background-color":"#883"}},[t._v(" └─camera_para.dat")]),t._v(" "),_("li",[t._v(" └─3Dmarker")]),t._v(" "),_("li",{staticStyle:{"background-color":"#883"}},[t._v("   └─hiro.patt")])])]),t._v(" "),_("p",{staticClass:"mb"},[t._v("これで最低限の準備が整いました！")]),t._v(" "),_("h2",[t._v("AR.jsを利用する")]),t._v(" "),_("p",{staticClass:"mb"},[t._v("利用方法をまとめていきます。Nuxtで実際にできたものを追記していきます。")]),t._v(" "),_("h3",[t._v("設定確認のためのデモ(easyTest)")]),t._v(" "),_("p",{staticClass:"mb"},[t._v("Three.jsはHTMLベースのA-Frameとは違って、JavaScript(TypeScript)がベースになります。")]),t._v(" "),_("p",{staticClass:"mb"},[t._v("また、Nuxtの場合はvueファイル内のDOMの監視が常に行われるため、スピードを考慮してThree.jsのような階層の深いモジュールはvueファイルに直接書き込まないほうがいいそうです。"),_("br"),t._v("(体感ではあまり感じられませんでしたが...)")]),t._v(" "),_("p",[t._v("なので今回は、外部のTypeScriptファイルを読み出して使うことにしようと思います。")]),t._v(" "),_("p",[t._v("簡単なデモを動かすために、まず以下のファイルをダウンロードしてください。")]),t._v(" "),_("div",{staticClass:"mb"},[_("a",{staticClass:"link-box",attrs:{href:"/media-exp-ts/public/easyTest",download:"easyTest.ts"}},[t._v("easyTest.tsファイル")])]),t._v(" "),_("p",[t._v("このファイルを”assets”フォルダに配置してみましょう。")]),t._v(" "),_("code",[_("ol",{staticClass:"mb"},[_("li",[t._v("project")]),t._v(" "),_("li",[t._v("└─assets")]),t._v(" "),_("li",{staticStyle:{"background-color":"#883"}},[t._v(" └─easyTest.ts")])])]),t._v(" "),_("p",[t._v("次に”pages”に適当なvueファイルを作成し、以下を貼り付けてみてください。")]),t._v(" "),_("code",[_("ol",{staticClass:"mb"},[_("li",[t._v("<template>")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("</template>")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v('<script lang="ts">')]),t._v(" "),_("li",[t._v("import Vue from 'vue'")]),t._v(" "),_("li",[t._v("import {AR} from '@/assets/easyTest'")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("// 変数の定義")]),t._v(" "),_("li",[t._v("export type DataType = {")]),t._v(" "),_("li",[t._v("  ar:AR,")]),t._v(" "),_("li",[t._v("}")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("export default Vue.extend({")]),t._v(" "),_("li",[t._v('  layout: "ar",')]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("  data():DataType {")]),t._v(" "),_("li",[t._v("    return{")]),t._v(" "),_("li",[t._v("      ar: new AR(),")]),t._v(" "),_("li",[t._v("    }")]),t._v(" "),_("li",[t._v("  },")]),t._v(" "),_("li",[t._v("})")]),t._v(" "),_("li",[t._v("<\/script>")]),t._v(" "),_("li"),t._v(" "),_("li",[t._v("<style>")]),t._v(" "),_("li",[t._v("html {")]),t._v(" "),_("li",[t._v("  width: 100%;")]),t._v(" "),_("li",[t._v("  height: 100%;")]),t._v(" "),_("li",[t._v("}")]),t._v(" "),_("li",[t._v("body {")]),t._v(" "),_("li",[t._v("  overflow: hidden;")]),t._v(" "),_("li",[t._v("  margin : 0px;")]),t._v(" "),_("li",[t._v("}")]),t._v(" "),_("li",[t._v("</style>")])])]),t._v(" "),_("p",[t._v("このページにアクセスしてHiroマーカーを写すと、立方体が表示されると思います。以下のデモと同じ結果になるはずです。")]),t._v(" "),_("div",{staticClass:"mb"},[_("a",{staticClass:"link-box",attrs:{href:"ARdemo/easyTest",target:"_blank",rel:"noopener noreferrer"}},[t._v("easyTest デモ")])]),t._v(" "),_("p",[t._v("そもそもHiroマーカーって何？って方は、あわせてこちらもどうぞー")]),t._v(" "),_("div",{staticClass:"mb"},[_("a",{staticClass:"link-box",attrs:{href:"ARdemo"}},[t._v("デモ置き場")])])])}],!1,null,null,null);v.default=component.exports}}]);